<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      metal:use-macro="layout">
<tal:block metal:fill-slot="extra_head">
  <script src="${request.static_url('lemontest:static/js/bootstrap-typeahead.js')}"></script>
  <script>
    $(function(){
      var sourcerer = function (what) {
        return function (query, process) {
          $.getJSON(
            "/api/auto_complete", 
            {what: what, match: query}, 
            process
          );
        };
      };
      $("#submitter").typeahead({source: sourcerer("name")});
      $("#site").typeahead({source: sourcerer("site")});
    });
  </script>
</tal:block>c
<tal:block metal:fill-slot="main">
 <!-- Main hero unit for a primary marketing message or call to action -->
  <h1>Upload <small> submit a new archive for testing.</small></h1>
  <form action="/upload" method="post" accept-charset="UTF-8" enctype="multipart/form-data">
    <div class="row">
      <div class="span3">
        <label for="submitter">Your Name</label>
        <input id="submitter" name="submitter" type="text" autocomplete="off" autofocus value="${name}" />
      </div>
      <div class="span3">
        <label for="site">Site Name</label>
        <input id="site" name="site" type="text" autocomplete="off" />
      </div>
    </div>
    <div class="row">
      <div class="span3">
        <label for="label">Report Label</label>
        <input id="label" name="label" type="text" value="${label}" />
      </div>
      <div class="span3">
        <label for="archiveType">Archive Type</label>
        <select name="archive_type" id="archiveType">
          <option tal:repeat="type archive_types" value="${type}">
            ${type.replace("_", " ")}
          </option>
        </select>
      </div>
    </div>
    <div class="row">
      <div class="span6">
        <label for="technicalFile">Select file</label>
        <input type="file" name="fileInput" id="fileInput" class="btn" />
      </div>
    </div>
    <div class="row">
      <div class="form-actions span6">
        <input type="submit" value="Submit Archive" class="btn btn-primary">
        <button class="btn" type="reset">Reset</button>
      </div>
    </div>
  </form>
</tal:block>
</html>
