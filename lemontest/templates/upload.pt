<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      metal:use-macro="layout">
      <tal:block metal:fill-slot="extra_head">
        <script src="${request.static_url('lemontest:static/js/bootstrap-typeahead.js')}"></script>
        <script>
          $(function(){

            var sourcerer = function (what) {
              return function (query, process) {
                $.getJSON(
                  "/api/auto_complete", 
                  {what: what, match: query}, 
                  process
                );
              };
            };

            $("#submitter").typeahead({source: sourcerer("name")});
            $("#site").typeahead({source: sourcerer("site")});
          });
        </script>
      </tal:block>
      <tal:block metal:fill-slot="main">
       <!-- Main hero unit for a primary marketing message or call to action -->
      <div class="hero-unit">
        <h1>Using Ion Inspector</h1>
        <p>Ion Inspector is a simple customer support testing tool.  It automatically runs a battery of tests on a customer support archive and reports actionable information for any known issues.</p>
        <p>Submit an archive below.</p>
      </div>

      <!-- Example row of columns -->
      <div class="row">
        <div class="span8">
          <h2>Technical</h2>
          <p>Upload a system log archive.</p>
          <form action="/upload" method="post" accept-charset="UTF-8" enctype="multipart/form-data">
            <fieldset>
              <div class="clearfix">
                <label for="submitter">Your Name</label>
                <input id="submitter" name="submitter" size="30" type="text" autocomplete="off" value="${name}" />
              </div>
              <div class="clearfix">
                <label for="label">Report Label</label>
                <input id="label" name="label" size="30" type="text" value="${label}" />
              </div>
              <div class="clearfix">
                <label for="site">Site Name</label>
                <input id="site" name="site" size="30" type="text" autocomplete="off" />
              </div>
              <div class="clearfix">
                <label for="archiveType">Archive Type</label>
                <select name="archive_type" id="archiveType">
                  <option tal:repeat="type archive_types" value="${type}">
                    ${type.replace("_", " ")}
                  </option>
                </select>
              </div>
              <div class="clearfix">
                <label for="technicalFile">Select file</label>
                <input type="file" name="fileInput" id="fileInput" class="btn" />
              </div>
              <div class="form-actions">
                <input type="submit" value="Submit Technical" class="btn btn-primary">
                <button class="btn" type="reset">Reset</button>
              </div>
            </fieldset>
          </form>
        </div>
      </div>
      </tal:block>
</html>
