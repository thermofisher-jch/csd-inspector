/*!
 DateTime picker for DataTables.net v1.0.2

 Â©2020 SpryMedia Ltd, all rights reserved.
 License: MIT datatables.net/license/mit
*/
(function(f){"function"===typeof define&&define.amd?define(["jquery"],function(d){return f(d,window,document)}):"object"===typeof exports?module.exports=function(d,l){d||(d=window);return f(l,d,d.document)}:f(jQuery,window,document)})(function(f,d,l,p){var e=d.moment?d.moment:d.dayjs?d.dayjs:d.luxon?d.luxon:null,j=function(a,c){this.c=f.extend(!0,{},j.defaults,c);var b=this.c.classPrefix,g=this.c.i18n;if(!e&&"YYYY-MM-DD"!==this.c.format)throw"DateTime: Without momentjs, dayjs or luxon only the format 'YYYY-MM-DD' can be used";
"string"===typeof this.c.minDate&&(this.c.minDate=new Date(this.c.minDate));"string"===typeof this.c.maxDate&&(this.c.maxDate=new Date(this.c.maxDate));g=f('<div class="'+b+'"><div class="'+b+'-date"><div class="'+b+'-title"><div class="'+b+'-iconLeft"><button title="'+g.previous+'">'+g.previous+'</button></div><div class="'+b+'-iconRight"><button title="'+g.next+'">'+g.next+'</button></div><div class="'+b+'-label"><span></span><select class="'+b+'-month"></select></div><div class="'+b+'-label"><span></span><select class="'+
b+'-year"></select></div></div><div class="'+b+'-calendar"></div></div><div class="'+b+'-time"><div class="'+b+'-hours"></div><div class="'+b+'-minutes"></div><div class="'+b+'-seconds"></div></div><div class="'+b+'-error"></div></div>');this.dom={container:g,date:g.find("."+b+"-date"),title:g.find("."+b+"-title"),calendar:g.find("."+b+"-calendar"),time:g.find("."+b+"-time"),error:g.find("."+b+"-error"),input:f(a)};this.s={d:null,display:null,minutesRange:null,secondsRange:null,namespace:"dateime-"+
j._instance++,parts:{date:null!==this.c.format.match(/[YMD]|L(?!T)|l/),time:null!==this.c.format.match(/[Hhm]|LT|LTS/),seconds:-1!==this.c.format.indexOf("s"),hours12:null!==this.c.format.match(/[haA]/)}};this.dom.container.append(this.dom.date).append(this.dom.time).append(this.dom.error);this.dom.date.append(this.dom.title).append(this.dom.calendar);this._constructor()};f.extend(j.prototype,{destroy:function(){this._hide(!0);this.dom.container.off().empty();this.dom.input.removeAttr("autocomplete").off(".datetime")},
errorMsg:function(a){var c=this.dom.error;a?c.html(a):c.empty();return this},hide:function(){this._hide();return this},max:function(a){this.c.maxDate="string"===typeof a?new Date(a):a;this._optionsTitle();this._setCalander();return this},min:function(a){this.c.minDate="string"===typeof a?new Date(a):a;this._optionsTitle();this._setCalander();return this},owns:function(a){return 0<f(a).parents().filter(this.dom.container).length},val:function(a,c){if(a===p)return this.s.d;if(a instanceof Date)this.s.d=
this._dateToUtc(a);else if(null===a||""===a)this.s.d=null;else if("--now"===a)this.s.d=new Date;else if("string"===typeof a)if(e&&e==d.luxon){var b=e.DateTime.fromFormat(a,this.c.format);this.s.d=b.isValid?b.toJSDate():null}else e?(b=e.utc(a,this.c.format,this.c.locale,this.c.strict),this.s.d=b.isValid()?b.toDate():null):(b=a.match(/(\d{4})\-(\d{2})\-(\d{2})/),this.s.d=b?new Date(Date.UTC(b[1],b[2]-1,b[3])):null);if(c||c===p)this.s.d?this._writeOutput():this.dom.input.val(a);this.s.d||(this.s.d=this._dateToUtc(new Date));
this.s.display=new Date(this.s.d.toString());this.s.display.setUTCDate(1);this._setTitle();this._setCalander();this._setTime();return this},_constructor:function(){var a=this,c=this.c.classPrefix,b=this.dom.input.val(),g=function(){var c=a.dom.input.val();c!==b&&(a.c.onChange.call(a,c,a.s.d,a.dom.input),b=c)};this.s.parts.date||this.dom.date.css("display","none");this.s.parts.time||this.dom.time.css("display","none");this.s.parts.seconds||(this.dom.time.children("div."+c+"-seconds").remove(),this.dom.time.children("span").eq(1).remove());
this._optionsTitle();f(l).on("i18n.dt",function(c,b){if(b.oLanguage.datetime){f.extend(true,a.c.i18n,b.oLanguage.datetime);this._optionsTitle()}});"hidden"===this.dom.input.attr("type")&&(this.dom.container.addClass("inline"),this.c.attachTo="input",this.val(this.dom.input.val(),!1),this._show());b&&this.val(b,!1);this.dom.input.attr("autocomplete","off").on("focus.datetime click.datetime",function(){if(!a.dom.container.is(":visible")&&!a.dom.input.is(":disabled")){a.val(a.dom.input.val(),false);
a._show()}}).on("keyup.datetime",function(){a.dom.container.is(":visible")&&a.val(a.dom.input.val(),false)});this.dom.container.on("change","select",function(){var b=f(this),k=b.val();if(b.hasClass(c+"-month")){a._correctMonth(a.s.display,k);a._setTitle();a._setCalander()}else if(b.hasClass(c+"-year")){a.s.display.setUTCFullYear(k);a._setTitle();a._setCalander()}else if(b.hasClass(c+"-hours")||b.hasClass(c+"-ampm")){if(a.s.parts.hours12){b=f(a.dom.container).find("."+c+"-hours").val()*1;k=f(a.dom.container).find("."+
c+"-ampm").val()==="pm";a.s.d.setUTCHours(b===12&&!k?0:k&&b!==12?b+12:b)}else a.s.d.setUTCHours(k);a._setTime();a._writeOutput(true);g()}else if(b.hasClass(c+"-minutes")){a.s.d.setUTCMinutes(k);a._setTime();a._writeOutput(true);g()}else if(b.hasClass(c+"-seconds")){a.s.d.setSeconds(k);a._setTime();a._writeOutput(true);g()}a.dom.input.focus();a._position()}).on("click",function(b){var k=a.s.d,d=b.target.nodeName.toLowerCase(),h=d==="span"?b.target.parentNode:b.target,d=h.nodeName.toLowerCase();if(d!==
"select"){b.stopPropagation();if(d==="button"){h=f(h);b=h.parent();if(b.hasClass("disabled")&&!b.hasClass("range"))h.blur();else if(b.hasClass(c+"-iconLeft")){a.s.display.setUTCMonth(a.s.display.getUTCMonth()-1);a._setTitle();a._setCalander();a.dom.input.focus()}else if(b.hasClass(c+"-iconRight")){a._correctMonth(a.s.display,a.s.display.getUTCMonth()+1);a._setTitle();a._setCalander();a.dom.input.focus()}else{if(h.parents("."+c+"-time").length){d=h.data("value");h=h.data("unit");if(h==="minutes"){if(b.hasClass("disabled")&&
b.hasClass("range")){a.s.minutesRange=d;a._setTime();return}a.s.minutesRange=null}if(h==="seconds"){if(b.hasClass("disabled")&&b.hasClass("range")){a.s.secondsRange=d;a._setTime();return}a.s.secondsRange=null}if(d==="am")if(k.getUTCHours()>=12)d=k.getUTCHours()-12;else return;else if(d==="pm")if(k.getUTCHours()<12)d=k.getUTCHours()+12;else return;k[h==="hours"?"setUTCHours":h==="minutes"?"setUTCMinutes":"setSeconds"](d);a._setTime();a._writeOutput(true)}else{k||(k=a._dateToUtc(new Date));k.setUTCDate(1);
k.setUTCFullYear(h.data("year"));k.setUTCMonth(h.data("month"));k.setUTCDate(h.data("day"));a._writeOutput(true);a.s.parts.time?a._setCalander():setTimeout(function(){a._hide()},10)}g()}}else a.dom.input.focus()}})},_compareDates:function(a,c){return e&&e==d.luxon?e.DateTime.fromJSDate(a).toISODate()===e.DateTime.fromJSDate(c).toISODate():this._dateToUtcString(a)===this._dateToUtcString(c)},_correctMonth:function(a,c){var b=this._daysInMonth(a.getUTCFullYear(),c),g=a.getUTCDate()>b;a.setUTCMonth(c);
g&&(a.setUTCDate(b),a.setUTCMonth(c))},_daysInMonth:function(a,c){return[31,0===a%4&&(0!==a%100||0===a%400)?29:28,31,30,31,30,31,31,30,31,30,31][c]},_dateToUtc:function(a){return new Date(Date.UTC(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds()))},_dateToUtcString:function(a){return e&&e==d.luxon?e.DateTime.fromJSDate(a).toISODate():a.getUTCFullYear()+"-"+this._pad(a.getUTCMonth()+1)+"-"+this._pad(a.getUTCDate())},_hide:function(a){if(a||"hidden"!==this.dom.input.attr("type"))a=
this.s.namespace,this.dom.container.detach(),f(d).off("."+a),f(l).off("keydown."+a),f("div.dataTables_scrollBody").off("scroll."+a),f("div.DTE_Body_Content").off("scroll."+a),f("body").off("click."+a)},_hours24To12:function(a){return 0===a?12:12<a?a-12:a},_htmlDay:function(a){if(a.empty)return'<td class="empty"></td>';var c=["selectable"],b=this.c.classPrefix;a.disabled&&c.push("disabled");a.today&&c.push("now");a.selected&&c.push("selected");return'<td data-day="'+a.day+'" class="'+c.join(" ")+'"><button class="'+
b+"-button "+b+'-day" type="button" data-year="'+a.year+'" data-month="'+a.month+'" data-day="'+a.day+'"><span>'+a.day+"</span></button></td>"},_htmlMonth:function(a,c){var b=this._dateToUtc(new Date),g=this._daysInMonth(a,c),o=(new Date(Date.UTC(a,c,1))).getUTCDay(),k=[],d=[];0<this.c.firstDay&&(o-=this.c.firstDay,0>o&&(o+=7));for(var h=g+o,e=h;7<e;)e-=7;var h=h+(7-e),m=this.c.minDate,e=this.c.maxDate;m&&(m.setUTCHours(0),m.setUTCMinutes(0),m.setSeconds(0));e&&(e.setUTCHours(23),e.setUTCMinutes(59),
e.setSeconds(59));for(var j=0,i=0;j<h;j++){var n=new Date(Date.UTC(a,c,1+(j-o))),l=this.s.d?this._compareDates(n,this.s.d):!1,t=this._compareDates(n,b),p=j<o||j>=g+o,s=m&&n<m||e&&n>e,q=this.c.disableDays;Array.isArray(q)&&-1!==f.inArray(n.getUTCDay(),q)?s=!0:"function"===typeof q&&!0===q(n)&&(s=!0);d.push(this._htmlDay({day:1+(j-o),month:c,year:a,selected:l,today:t,disabled:s,empty:p}));7===++i&&(this.c.showWeekNumber&&d.unshift(this._htmlWeekOfYear(j-o,c,a)),k.push("<tr>"+d.join("")+"</tr>"),d=[],
i=0)}b=this.c.classPrefix;g=b+"-table";this.c.showWeekNumber&&(g+=" weekNumber");m&&(m=m>=new Date(Date.UTC(a,c,1,0,0,0)),this.dom.title.find("div."+b+"-iconLeft").css("display",m?"none":"block"));e&&(e=e<new Date(Date.UTC(a,c+1,1,0,0,0)),this.dom.title.find("div."+b+"-iconRight").css("display",e?"none":"block"));return'<table class="'+g+'"><thead>'+this._htmlMonthHead()+"</thead><tbody>"+k.join("")+"</tbody></table>"},_htmlMonthHead:function(){var a=[],c=this.c.firstDay,b=this.c.i18n,g=function(a){for(a+=
c;7<=a;)a-=7;return b.weekdays[a]};this.c.showWeekNumber&&a.push("<th></th>");for(var d=0;7>d;d++)a.push("<th>"+g(d)+"</th>");return a.join("")},_htmlWeekOfYear:function(a,c,b){a=new Date(b,c,a,0,0,0,0);a.setDate(a.getDate()+4-(a.getDay()||7));b=Math.ceil(((a-new Date(b,0,1))/864E5+1)/7);return'<td class="'+this.c.classPrefix+'-week">'+b+"</td>"},_options:function(a,c,b){b||(b=c);a=this.dom.container.find("select."+this.c.classPrefix+"-"+a);a.empty();for(var g=0,d=c.length;g<d;g++)a.append('<option value="'+
c[g]+'">'+b[g]+"</option>")},_optionSet:function(a,c){var b=this.dom.container.find("select."+this.c.classPrefix+"-"+a),g=b.parent().children("span");b.val(c);b=b.find("option:selected");g.html(0!==b.length?b.text():this.c.i18n.unknown)},_optionsTime:function(a,c,b,g,d){var e=this.c.classPrefix,j=this.dom.container.find("div."+e+"-"+a),h,l=12===c?function(a){return a}:this._pad,e=this.c.classPrefix,m=e+"-table",p=this.c.i18n;if(j.length){var i="";h=10;var n=function(d,h,i){12===c&&"number"===typeof d&&
(12<=b&&(d+=12),12==d?d=0:24==d&&(d=12));var j=b===d||"am"===d&&12>b||"pm"===d&&12<=b?"selected":"";g&&-1===f.inArray(d,g)&&(j+=" disabled");i&&(j+=" "+i);return'<td class="selectable '+j+'"><button class="'+e+"-button "+e+'-day" type="button" data-unit="'+a+'" data-value="'+d+'"><span>'+h+"</span></button></td>"};if(12===c){i+="<tr>";for(d=1;6>=d;d++)i+=n(d,l(d));i+=n("am",p.amPm[0]);i+="</tr><tr>";for(d=7;12>=d;d++)i+=n(d,l(d));i+=n("pm",p.amPm[1]);i+="</tr>";h=7}else{if(24===c){var r=0;for(h=0;4>
h;h++){i+="<tr>";for(d=0;6>d;d++)i+=n(r,l(r)),r++;i+="</tr>"}}else{i+="<tr>";for(h=0;60>h;h+=10)i+=n(h,l(h),"range");d=null!==d?d:10*Math.floor(b/10);i=i+"</tr>"+('</tbody></thead><table class="'+m+" "+m+'-nospace"><tbody>')+"<tr>";for(h=d+1;h<d+10;h++)i+=n(h,l(h));i+="</tr>"}h=6}j.empty().append('<table class="'+m+'"><thead><tr><th colspan="'+h+'">'+p[a]+"</th></tr></thead><tbody>"+i+"</tbody></table>")}},_optionsTitle:function(){var a=this.c.i18n,c=this.c.minDate,b=this.c.maxDate,c=c?c.getFullYear():
null,b=b?b.getFullYear():null,c=null!==c?c:(new Date).getFullYear()-this.c.yearRange,b=null!==b?b:(new Date).getFullYear()+this.c.yearRange;this._options("month",this._range(0,11),a.months);this._options("year",this._range(c,b))},_pad:function(a){return 10>a?"0"+a:a},_position:function(){var a="input"===this.c.attachTo?this.dom.input.position():this.dom.input.offset(),c=this.dom.container,b=this.dom.input.outerHeight();if(c.hasClass("inline"))c.insertAfter(this.dom.input);else{this.s.parts.date&&
this.s.parts.time&&550<f(d).width()?c.addClass("horizontal"):c.removeClass("horizontal");"input"===this.c.attachTo?c.css({top:a.top+b,left:a.left}).insertAfter(this.dom.input):c.css({top:a.top+b,left:a.left}).appendTo("body");var g=c.outerHeight(),e=c.outerWidth(),j=f(d).scrollTop();a.top+b+g-j>f(d).height()&&(b=a.top-g,c.css("top",0>b?0:b));e+a.left>f(d).width()&&(a=f(d).width()-e,"input"===this.c.attachTo&&(a-=f(c).offsetParent().offset().left),c.css("left",0>a?0:a))}},_range:function(a,c,b){var d=
[];for(b||(b=1);a<=c;a+=b)d.push(a);return d},_setCalander:function(){this.s.display&&this.dom.calendar.empty().append(this._htmlMonth(this.s.display.getUTCFullYear(),this.s.display.getUTCMonth()))},_setTitle:function(){this._optionSet("month",this.s.display.getUTCMonth());this._optionSet("year",this.s.display.getUTCFullYear())},_setTime:function(){var a=this,c=this.s.d,b=null;e&&e==d.luxon&&(b=e.DateTime.fromJSDate(c));var g=null!=b?b.hour:c?c.getUTCHours():0,f=function(b){return a.c[b+"Available"]?
a.c[b+"Available"]:a._range(0,59,a.c[b+"Increment"])};this._optionsTime("hours",this.s.parts.hours12?12:24,g,this.c.hoursAvailable);this._optionsTime("minutes",60,null!=b?b.minute:c?c.getUTCMinutes():0,f("minutes"),this.s.minutesRange);this._optionsTime("seconds",60,null!=b?b.second:c?c.getSeconds():0,f("seconds"),this.s.secondsRange)},_show:function(){var a=this,c=this.s.namespace;this._position();f(d).on("scroll."+c+" resize."+c,function(){a._position()});f("div.DTE_Body_Content").on("scroll."+
c,function(){a._position()});f("div.dataTables_scrollBody").on("scroll."+c,function(){a._position()});var b=this.dom.input[0].offsetParent;if(b!==l.body)f(b).on("scroll."+c,function(){a._position()});f(l).on("keydown."+c,function(b){(9===b.keyCode||27===b.keyCode||13===b.keyCode)&&a._hide()});setTimeout(function(){f("body").on("click."+c,function(b){!f(b.target).parents().filter(a.dom.container).length&&b.target!==a.dom.input[0]&&a._hide()})},10)},_writeOutput:function(a){var c=this.s.d,b=e&&e==d.luxon?
e.DateTime.fromJSDate(this.s.d).toFormat(this.c.format):e?e.utc(c,p,this.c.locale,this.c.strict).format(this.c.format):c.getUTCFullYear()+"-"+this._pad(c.getUTCMonth()+1)+"-"+this._pad(c.getUTCDate());this.dom.input.val(b).trigger("change",{write:c});"hidden"===this.dom.input.attr("type")&&this.val(b,!1);a&&this.dom.input.focus()}});j.use=function(a){e=a};j._instance=0;j.defaults={attachTo:"body",classPrefix:"dt-datetime",disableDays:null,firstDay:1,format:"YYYY-MM-DD",hoursAvailable:null,i18n:{previous:"Previous",
next:"Next",months:"January February March April May June July August September October November December".split(" "),weekdays:"Sun Mon Tue Wed Thu Fri Sat".split(" "),amPm:["am","pm"],hours:"Hour",minutes:"Minute",seconds:"Second",unknown:"-"},maxDate:null,minDate:null,minutesAvailable:null,minutesIncrement:1,strict:!0,locale:"en",onChange:function(){},secondsAvailable:null,secondsIncrement:1,showWeekNumber:!1,yearRange:25};j.version="1.0.2";d.DateTime||(d.DateTime=j);f.fn.dtDateTime=function(a){return this.each(function(){new j(this,
a)})};f.fn.dataTable&&(f.fn.dataTable.DateTime=j,f.fn.DataTable.DateTime=j,f.fn.dataTable.Editor&&(f.fn.dataTable.Editor.DateTime=j));return j});
